# ChatGPT 对话聊天页面

一个简洁的 Web 应用，基于 GPT API 实现类似 ChatGPT 的对话功能。

## 功能特性

### 核心功能
- 🤖 **智能对话**: 基于 GPT API 的智能对话，支持流式传输
- 📝 **Markdown 渲染**: AI 回复支持完整的 Markdown 格式，包括代码高亮、数学公式、表格等
- 📁 **文件上传**: 支持上传文件并将内容作为上下文传递给 GPT
- 🖼️ **图片支持**: 支持粘贴图片，在输入框中显示缩略图预览
- ⚙️ **灵活配置**: 用户可自定义 API Key、请求 URL、代理地址
- 🎛️ **智能模型选择**: 预设常用模型，支持添加和管理自定义模型

### 对话管理
- 💬 **多对话会话**: 支持创建和管理多个独立的对话会话
- 📝 **智能标题**: 基于对话内容自动生成对话标题
- 📅 **时间分组**: 对话历史按时间智能分组（今天、昨天、N天前）
- 🔄 **快速切换**: 在不同对话间快速切换
- 🗑️ **对话管理**: 支持删除不需要的对话，智能防止创建重复空对话

### 流式传输
- ⚡ **实时响应**: 基于流式传输的实时 AI 回复
- ✨ **渐进显示**: AI 回复内容实时显示，带渐进色彩效果
- ⏹️ **中途取消**: 支持中途取消正在进行的 AI 回复
- 🔄 **状态指示**: 显示"正在输入..."状态

### 用户体验
- 📋 **一键复制**: AI 回复消息支持一键复制（悬停显示）
- 🎨 **优雅界面**: 参考 ChatGPT 官网设计，左侧边栏 + 主聊天区域布局
- 📱 **响应式设计**: 完美适配桌面和移动设备
- 🎯 **居中显示**: 对话内容居中显示，提供更好的阅读体验
- 📏 **可调界面**: 侧边栏支持折叠和拖拽调整宽度
- 🎨 **细滚动条**: 优化的滚动条样式，位置在最右边

### 数据管理
- 💾 **本地存储**: 配置和对话历史安全保存在本地
- 🔄 **数据迁移**: 自动从旧版本迁移数据
- 📤 **导入导出**: 支持数据备份和恢复
- 🧹 **智能清理**: 自动限制对话数量和消息条数，保持应用性能

## 技术栈

- **前端框架**: React 18 + TypeScript
- **构建工具**: Vite
- **样式**: Tailwind CSS
- **状态管理**: React Hooks + Context
- **HTTP 客户端**: Axios
- **图标**: Lucide React
- **Markdown 渲染**: React Markdown + 代码高亮 + 数学公式支持

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

### 3. 构建生产版本

```bash
npm run build
```

## 使用说明

### 初始配置

首次使用时，需要在设置页面配置以下信息：

1. **API Key**: 你的 GPT API 密钥
2. **API URL**: GPT API 请求地址（默认: https://api.openai.com/v1/chat/completions）
3. **代理地址**: 可选，如果需要通过代理访问 API

### 功能使用

#### 对话管理
- **创建新对话**: 点击左侧边栏的"新对话"按钮
- **切换对话**: 在左侧边栏点击任意对话进行切换
- **删除对话**: 悬停在对话上，点击删除按钮
- **折叠侧边栏**: 点击"收起"按钮可折叠侧边栏节省空间
- **自动标题**: 系统会根据对话内容自动生成有意义的标题

#### 智能对话
- 在输入框中输入消息，按 Enter 或点击发送按钮
- AI 会实时流式回复，逐字符显示内容
- 可随时点击"停止生成"按钮中断 AI 回复
- 支持多轮对话，上下文会自动保持
- 点击 AI 回复右上角的复制按钮可快速复制内容

#### 文件上传
- 点击输入框旁的文件上传按钮
- 支持的文件类型：.txt, .md, .json, .csv, .pdf 等
- 文件内容会作为上下文发送给 GPT

#### 图片处理
- 直接在输入框中粘贴图片（Ctrl+V）
- 图片会显示缩略图预览
- 支持 GPT-4V 的图片理解功能
- 点击图片可放大查看

## 项目结构

```
chatAi/
├── public/                 # 静态资源
├── src/
│   ├── components/         # React 组件
│   │   ├── Chat/          # 聊天相关组件
│   │   │   ├── ChatInterface.tsx      # 主聊天界面
│   │   │   ├── ChatSidebar.tsx        # 对话历史侧边栏
│   │   │   ├── MessageBubble.tsx      # 消息气泡组件
│   │   │   ├── MessageInput.tsx       # 消息输入组件
│   │   │   └── MessageList.tsx        # 消息列表组件
│   │   ├── Settings/      # 设置相关组件
│   │   │   ├── SettingsPanel.tsx      # 设置面板
│   │   │   └── DataManagement.tsx     # 数据管理
│   │   └── UI/            # 通用 UI 组件
│   │       ├── ImagePreview.tsx       # 图片预览
│   │       ├── MarkdownRenderer.tsx   # Markdown 渲染器
│   │       ├── ErrorBoundary.tsx      # 错误边界组件
│   │       └── ResizableSidebar.tsx   # 可调整大小侧边栏
│   ├── services/          # API 服务
│   │   └── chatService.ts # 聊天服务（支持流式传输）
│   ├── types/             # TypeScript 类型定义
│   │   └── index.ts       # 核心类型定义
│   ├── utils/             # 工具函数
│   │   ├── fileProcessor.ts # 文件处理
│   │   ├── helpers.ts      # 通用工具函数
│   │   └── storage.ts      # 本地存储管理
│   ├── App.tsx            # 主应用组件
│   ├── main.tsx           # 应用入口
│   └── index.css          # 全局样式
├── package.json
├── vite.config.ts
├── tailwind.config.js
├── TECHNICAL_DOCUMENTATION.md # 技术文档
└── DEPLOYMENT.md          # 部署文档
```

## 配置说明

### API 配置

应用支持多种 GPT API 提供商：

- **OpenAI**: 官方 API
- **Azure OpenAI**: 企业版 API  
- **OpenRouter**: 多模型聚合服务，支持流式传输
- **其他兼容提供商**: 任何兼容 OpenAI API 格式的服务

### 流式传输配置

应用默认启用流式传输功能，提供更好的用户体验：
- 实时显示 AI 回复内容
- 支持中途取消生成
- 兼容所有支持流式传输的 API 提供商

### 代理配置

如果你在中国大陆使用，可能需要配置代理：

1. 在设置中填入代理地址
2. 格式：`http://proxy-server:port`
3. 支持 HTTP/HTTPS 代理

## 开发指南

### 添加新功能

1. 在 `src/components/` 下创建新组件
2. 在 `src/hooks/` 下添加相关 Hook
3. 在 `src/services/` 下添加 API 服务
4. 更新类型定义在 `src/types/`

### 样式开发

项目使用 Tailwind CSS，遵循以下原则：

- 使用语义化的类名组合
- 保持响应式设计
- 遵循设计系统的颜色和间距规范

## 部署

### 静态部署

```bash
npm run build
```

构建产物在 `dist/` 目录，可以部署到任何静态托管服务。

### Docker 部署

```bash
docker build -t chatgpt-web .
docker run -p 3000:3000 chatgpt-web
```

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

## 常见问题

### Q: 如何获取 API Key？
A: 访问 OpenAI 官网注册账号并创建 API Key。

### Q: 支持哪些文件格式？
A: 目前支持文本文件（.txt, .md, .json, .csv）和 PDF 文件。

### Q: 图片上传有大小限制吗？
A: 建议图片大小不超过 20MB，会自动压缩处理。

### Q: 对话历史保存在哪里？
A: 所有数据都保存在浏览器本地存储中，不会上传到服务器。应用会自动管理存储空间，保留最近 50 个对话，每个对话最多 100 条消息。

### Q: 如何管理多个对话？
A: 点击左侧边栏的"新对话"创建新对话，点击任意对话可快速切换，悬停在对话上可看到删除按钮。系统会根据对话内容自动生成标题。

### Q: 流式传输是什么？
A: 流式传输让 AI 回复实时逐字符显示，就像真人打字一样。你可以随时点击"停止生成"按钮中断 AI 回复。

### Q: 如何复制 AI 的回复？
A: 将鼠标悬停在 AI 回复消息上，会出现复制按钮，点击即可复制整条消息内容。
