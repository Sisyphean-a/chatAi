# ChatGPT 对话聊天页面 - 使用指南

## 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

应用将在 `http://localhost:3000` 启动。

### 3. 首次配置

首次打开应用时，你需要配置以下信息：

1. **API Key**: 你的 GPT API 密钥
2. **API URL**: GPT API 请求地址（默认: https://api.openai.com/v1/chat/completions）
3. **代理地址**: 可选，如果需要通过代理访问 API

点击右上角的设置按钮 ⚙️ 进行配置。

## 主要功能

### 📝 文字聊天

- 在底部输入框中输入消息
- 按 `Enter` 发送，`Shift + Enter` 换行
- 支持多轮对话，上下文自动保持
- 消息历史自动保存到本地

### 📁 文件上传

支持的文件类型：
- **文本文件**: .txt, .md, .json, .csv
- **PDF 文件**: .pdf（需要额外处理）
- **图片文件**: .jpg, .png, .gif, .webp

上传方式：
1. 点击输入框旁的 📎 按钮选择文件
2. 直接拖拽文件到输入框
3. 复制粘贴文件内容

### 🖼️ 图片支持

- **粘贴图片**: 在输入框中直接 `Ctrl+V` 粘贴图片
- **图片预览**: 点击消息中的图片可以放大查看
- **图片压缩**: 大图片会自动压缩以提高传输效率

### ⚙️ 设置配置

设置面板支持拖拽调整宽度，可以根据需要调整到合适的大小。

#### API 配置
- **API Key**: 必填，你的 GPT API 密钥
- **API URL**: API 请求地址，支持 OpenAI 和兼容的服务
  - OpenAI: `https://api.openai.com/v1/chat/completions`
  - OpenRouter: `https://openrouter.ai/api/v1/chat/completions`
- **代理 URL**: 可选，格式如 `http://proxy-server:port`
- **自定义请求头**: 可选，JSON 格式，用于 OpenRouter 等需要额外头部的 API

#### 模型配置
- **模型选择**: 支持手动输入模型名称或从预设列表选择
  - 预设模型：GPT-4, GPT-4 Turbo, GPT-3.5 Turbo, Claude 3 系列等
  - 自定义模型：可以输入任何兼容的模型名称
- **Temperature**: 控制回复的创意性（0-2）
- **Max Tokens**: 最大回复长度（1-128000），留空表示不限制

### 💾 数据管理

#### 本地存储
- 所有配置和对话历史都保存在浏览器本地
- 不会上传到任何服务器
- 支持导出和导入数据

#### 数据操作
- **导出数据**: 将配置和历史导出为 JSON 文件
- **导入数据**: 从 JSON 文件恢复配置和历史
- **清除数据**: 删除所有本地数据

## 使用技巧

### 1. 高效输入
- 使用 `Shift + Enter` 进行换行
- 支持拖拽文件到输入框
- 可以同时发送文字和文件

### 2. 文件处理
- 文件大小限制：20MB
- 图片会自动压缩优化
- 文本文件内容会作为上下文发送给 GPT

### 3. 对话管理
- 点击"清空对话"可以开始新的对话
- 出错时可以点击"重试"重新发送
- 对话历史自动保存，刷新页面不会丢失

### 4. 图片查看
- 点击消息中的图片可以全屏预览
- 支持缩放、旋转、下载等操作
- 使用 ESC 键或点击关闭按钮退出预览

### 5. 界面调整
- 设置面板支持拖拽调整宽度
- 拖拽左边缘可以调整面板宽度（320px - 800px）
- 面板宽度会自动保存，下次打开时恢复

## 常见问题

### Q: 如何获取 API Key？
A: 访问 [OpenAI 官网](https://platform.openai.com/api-keys) 注册账号并创建 API Key。

### Q: 支持哪些 API 提供商？
A: 支持 OpenAI 官方 API 以及任何兼容 OpenAI API 格式的服务提供商。

### Q: 为什么需要配置代理？
A: 如果你在中国大陆使用 OpenAI API，可能需要配置代理来访问服务。

### Q: 数据安全吗？
A: 所有配置和对话历史都保存在你的浏览器本地，不会上传到我们的服务器。

### Q: 文件上传有什么限制？
A:
- 单个文件最大 20MB
- 支持常见的文本和图片格式
- PDF 文件需要额外的解析库支持

### Q: 如何使用自定义模型？
A: 在设置中的"模型"字段直接输入模型名称，支持任何兼容 OpenAI API 格式的模型。

### Q: Max Tokens 设置为空是什么意思？
A: 留空表示不限制输出长度，让模型自由决定回复的长度。

### Q: 如何配置 OpenRouter？
A:
1. API URL 设置为：`https://openrouter.ai/api/v1/chat/completions`
2. API Key 使用你的 OpenRouter API Key（格式：`sk-or-v1-...`）
3. 模型可以输入如：`openai/gpt-4o`、`anthropic/claude-3-sonnet` 等
4. 自定义请求头（可选）：
```json
{
  "HTTP-Referer": "https://yoursite.com",
  "X-Title": "Your App Name"
}
```

### Q: 如何备份我的数据？
A: 在设置页面的"数据管理"部分，点击"导出数据"即可下载备份文件。

### Q: 可以在移动设备上使用吗？
A: 是的，应用采用响应式设计，支持手机和平板设备。

## 故障排除

### 连接失败
1. 检查 API Key 是否正确
2. 确认 API URL 是否可访问
3. 如果在中国大陆，尝试配置代理

### 文件上传失败
1. 检查文件大小是否超过 20MB
2. 确认文件格式是否支持
3. 尝试刷新页面重新上传

### 图片显示异常
1. 检查图片格式是否支持
2. 尝试使用较小的图片
3. 清除浏览器缓存

### 数据丢失
1. 检查浏览器是否开启了隐私模式
2. 确认没有清除浏览器数据
3. 尝试从备份文件恢复

## 技术支持

如果遇到其他问题，可以：

1. 检查浏览器控制台是否有错误信息
2. 尝试在不同浏览器中使用
3. 清除浏览器缓存和数据后重新配置
4. 查看项目的 GitHub Issues

## 更新日志

### v1.0.0
- ✅ 基础文字聊天功能
- ✅ 文件上传支持
- ✅ 图片粘贴和预览
- ✅ 本地数据存储
- ✅ 配置管理
- ✅ 数据导入导出

---

**注意**: 请妥善保管你的 API Key，不要分享给他人。
